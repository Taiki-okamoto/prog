(this["webpackJsonpreact-three-trial"]=this["webpackJsonpreact-three-trial"]||[]).push([[0],{126:function(e,c,a){"use strict";a.r(c);var p=a(5),n=a(0),i=a.n(n),l=a(10),t=a.n(l),_=(a(87),a(14)),o=a(157),r=a(161),s=a(162),j={count:15,turn:"black",board:{board:[[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}]],[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}]],[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:1,can_place:!0},{piece:0,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:0,can_place:!0},{piece:1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}]],[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:0,can_place:!0},{piece:1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:1,can_place:!0},{piece:0,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}]],[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}]],[[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0},{piece:-1,can_place:!0}],[{piece:0,can_place:!0},{piece:1,can_place:!0},{piece:0,can_place:!0},{piece:0,can_place:!0},{piece:0,can_place:!0},{piece:0,can_place:!0}]]]}},b=Object(n.createContext)(),d=function(e){var c=Object(n.useState)(""),a=Object(_.a)(c,2),i=a[0],l=a[1],t=Object(n.useState)(""),o=Object(_.a)(t,2),r=o[0],s=o[1],d=Object(n.useState)(""),u=Object(_.a)(d,2),h=u[0],O=u[1],g=Object(n.useState)(j),m=Object(_.a)(g,2),x=m[0],f=m[1],v=Object(n.useState)(""),y=Object(_.a)(v,2),S=y[0],C=y[1],w=Object(n.useState)([]),P=Object(_.a)(w,2),B=P[0],R=P[1];return Object(n.useEffect)((function(){B.length&&(k.emit("game",{piece:B,room:r,color:S}),R([]))}),[B]),Object(p.jsx)(b.Provider,{value:{roomName:r,setRoomName:s,sessionId:i,setSessionId:l,color:h,setColor:O,othelloBoard:x,setOthelloBoard:f,myColor:S,setMyColor:C,selectedPiece:B,setSelectedPiece:R},children:e.children})},u=function(e){var c=e.setStatus,a=Object(o.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"25ch"}},button:{"& > *":{margin:e.spacing(1)}}}}))(),i=Object(n.useContext)(b),l=i.roomName,t=i.setRoomName,j=Object(n.useState)(!1),d=Object(_.a)(j,2),u=(d[0],d[1]);return Object(p.jsx)("div",{style:{width:"95%",margin:"0 auto"},children:Object(p.jsx)("div",{style:{textAlign:"center",background:"lightgray",borderRadius:"6px",margin:"3em auto",width:"80%"},children:Object(p.jsxs)("form",{className:a.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){if(e.preventDefault(),""===l)return alert("\u90e8\u5c4b\u540d\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044");u(!0),console.log("".concat(l," \u306b\u53c2\u52a0\u3059\u308b")),c("play")},children:[Object(p.jsx)("div",{style:{height:"3vh"}}),Object(p.jsx)(r.a,{onChange:function(e){return t(e.target.value)},id:"filled-basic",label:"\u90e8\u5c4b\u540d",variant:"filled"}),Object(p.jsxs)("div",{style:{textAlign:"center",margin:"0 auto"},children:[Object(p.jsx)("div",{style:{height:"2vh"}}),Object(p.jsx)(s.a,{variant:"contained",type:"submit",children:"\u3042\u305d\u3076"})]}),Object(p.jsx)("div",{style:{height:"3vh"}})]})})})},h=a(53),O=a(39),g=a(71);Object(O.b)({OrbitControls:g.a});var m=function(){var e=Object(O.d)(),c=e.camera,a=e.gl.domElement;c.position.set(0,0,8);var i=Object(n.useRef)();return Object(O.c)((function(e){i.current.update()})),Object(p.jsx)("orbitControls",{ref:i,args:[c,a],rotateSpeed:.3,enableRotate:!0,enablePan:!0,minDistance:0,maxDistance:10,zoomSpeed:.6})},x=function(e){var c=e.piece,a=e.xyz,i=e.setSelectedPiece,l=(e.othelloBoard,e.myColor,Object(n.useRef)()),t=Object(n.useState)(!1),o=Object(_.a)(t,2),r=o[0],s=o[1],j=Object(n.useState)(!1),b=Object(_.a)(j,2),d=b[0],u=b[1];return Object(p.jsxs)("mesh",Object(h.a)(Object(h.a)({},e),{},{ref:l,scale:[.3,.3,.3],onClick:function(e){s(!r),i(a),e.stopPropagation()},onPointerOver:function(e){e.stopPropagation(),-1===c.piece&&u(!0)},onPointerOut:function(e){return u(!1)},children:[Object(p.jsx)("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),Object(p.jsx)("meshStandardMaterial",{attach:"material",color:d&&c.can_place?"lightpink":1===c.piece?"white":0===e.piece.piece?"black":"#2e7d32"})]}))},f=function(){var e=Object(n.useContext)(b),c=e.othelloBoard,a=e.setSelectedPiece,i=e.myColor;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:{width:"90%",margin:"0 auto",position:"relative",color:"lightgrey"}}),Object(p.jsx)("div",{style:{borderRadius:"6px",width:"95vw",margin:"0 auto",height:"75vh",backgroundColor:"#bcaaa4"},children:Object(p.jsxs)(O.a,{children:[Object(p.jsx)(m,{}),Object(p.jsx)("pointLight",{position:[100,100,100]}),Object(p.jsx)("pointLight",{position:[100,-100,-100]}),Object(p.jsx)("pointLight",{position:[-100,100,-100]}),Object(p.jsx)("pointLight",{position:[-100,-100,100]}),c&&c.board.board.length?c.board.board.map((function(e,n){return e.map((function(e,l){return e.map((function(e,t){return Object(p.jsx)(x,{setSelectedPiece:a,xyz:[n,l,t],piece:e,position:[n-2.5,l-2.5,t-2.5],othelloBoard:c,myColor:i},"".concat(n).concat(l).concat(t))}))}))})):""]})})]})},v=a(76),y=a.n(v),S=a.p+"static/media/logo.660dafc1.png",C=function(){return Object(p.jsx)("div",{style:{width:"100%",height:"7vh",background:"#21273d"},children:Object(p.jsx)("div",{style:{color:"skyblue",maxWidth:"200px",margin:"0 auto"},children:Object(p.jsx)("img",{src:S,alt:"logo",style:{display:"inline-block",margin:"10px auto",height:"100%",width:"100%",objectFit:"contain"}})})})},k=y()("https://nameko-3d-othello-backend.herokuapp.com/",{autoConnect:!1}),w=function(){var e=Object(n.useState)(null),c=Object(_.a)(e,2),a=c[0],i=c[1],l=Object(n.useContext)(b),t=l.setSessionId,o=l.setOthelloBoard,r=l.othelloBoard,s=l.setMyColor;return Object(n.useEffect)((function(){k.open(),k.on("connect",(function(){t(k.id)})),k.on("room",(function(e){i(e.status),"play"===e.status&&s(e.color),console.log("room => ",e)})),k.on("game",(function(e){console.log("game => ",e),o(e)}))}),[]),a?"play"===a?Object(p.jsx)(f,{othelloBoard:r}):Object(p.jsx)("div",{children:"not found"}):Object(p.jsx)(u,{setStatus:i})},P=function(){return Object(p.jsx)(d,{children:Object(p.jsxs)("div",{style:{background:"#21273d",minHeight:"100vh",overflow:"hidden"},children:[Object(p.jsx)(C,{}),Object(p.jsx)("div",{style:{height:"1px",width:"95%",margin:"0 auto",background:"grey"}}),Object(p.jsx)(w,{})]})})};t.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root"))},87:function(e,c,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.3b18d59d.chunk.js.map